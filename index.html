
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="ourCSS.css"> <!--our style sheet in an external file-->

    <!-- <script src="https://d3js.org/d3.v4.min.js"></script>   -->
    <title>Basic Webpage for our censorship measurement system</title>


  </head>
  <body>
      <!-- this will be where we visualize the database results -->
 
      
    <h1 class="center">Our TestWebpage</h1>









      <button type="button" onclick="loadDoc()">Complete measurement task</button>
    
      <div id="footer"></div>


      <div id="testingDiv"></div>

      <!-- TESTING SCRIP -->
      <script> 
      var CensorshipObject = new Object();

        CensorshipObject.sendSuccess = function()
        {
        console.log("image was loaded correctly");
        // this.submitResult("success");
        }
        CensorshipObject.sendFailure = function()
        {
        console.log("image failed to load correctly");
        // this.submitResult("failure");
        }
        CensorshipObject.measure = function() {
        var img = new Image(); // width, height values are optional params
        img.src = "https://www.w3schools.com/tags/smiley.gif"; //DEBUGGGING
        img.onerror = CensorshipObject.sendFailure;
        img.onload = CensorshipObject.sendSuccess;
        // img.css('display', 'none');   //hide the image we are loading

        CensorshipObject.myID =3; //DEBUGGING
        document.getElementById("footer").appendChild(img);

        }
        // CensorshipObject.measure();
     
      </script>
      
      <!-- script to deal with the loading of the the measurement task when button is clicked -->
    <script>
          function loadDoc() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() 
            {
              if (this.readyState == 4 && this.status == 200) 
              {
                var res = document.getElementById("footer").innerHTML =this.responseText;
                
                
                // console.log(document.getElementById('sc1'));
                
                
                eval(document.getElementById('sc1').innerHTML); //actually register new javascript with browser

                CensorshipObject.measure();
                
                
                
              }
          };
          xhttp.open("GET", "/task.js", true);
          xhttp.send();
    }
      
      
      
      
    </script>

    </body>
</html>
